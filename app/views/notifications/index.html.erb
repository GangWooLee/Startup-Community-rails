<%# 알림 목록 페이지 %>
<% content_for(:title) { "알림 - Undrew" } %>

<div class="min-h-screen bg-background pb-20">
  <%# 헤더 %>
  <header class="sticky top-0 bg-background/95 backdrop-blur-sm border-b border-border z-10">
    <div class="max-w-2xl mx-auto px-4 py-3 flex items-center justify-between">
      <div class="flex items-center gap-3">
<%= render_button variant: :ghost, class: "h-9 w-9 p-0 -ml-2", data: { controller: "navigation", navigation_fallback_value: root_path, action: "click->navigation#goBack" } do %>
          <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        <% end %>
        <h1 class="text-lg font-semibold text-foreground">알림</h1>
      </div>

      <% if @notifications.any? %>
        <%= button_to mark_all_read_notifications_path, method: :post,
            class: "text-sm text-primary hover:underline",
            data: { turbo_method: :post } do %>
          모두 읽음
        <% end %>
      <% end %>
    </div>
  </header>

  <%# 알림 목록 %>
  <main class="max-w-2xl mx-auto">
    <% if @notifications.any? %>
      <div id="notifications-list" class="divide-y divide-border">
        <% @notifications.each do |notification| %>
          <%= render "notifications/notification", notification: notification %>
        <% end %>
      </div>
    <% else %>
      <%# 빈 상태 %>
      <div class="flex flex-col items-center justify-center py-20 px-4 text-center">
        <div class="w-16 h-16 rounded-full bg-secondary flex items-center justify-center mb-4">
          <svg class="h-8 w-8 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9"/>
          </svg>
        </div>
        <p class="text-foreground font-medium mb-1">알림이 없습니다</p>
        <p class="text-sm text-muted-foreground">
          새로운 댓글, 좋아요가 있으면 여기에 표시됩니다.
        </p>
      </div>
    <% end %>
  </main>
</div>

<%# 하단 네비게이션 %>
<%= render "shared/bottom_nav" %>
