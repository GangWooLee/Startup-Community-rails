<%# The Fluid Lounge - Chat Index with Island Container %>
<div class="h-full bg-[#FDFBF7] md:flex md:items-center md:justify-center md:p-6"
     data-controller="navigation"
     data-navigation-reset-on-connect-value="true">

  <%# Island Container - 떠 있는 둥근 카드 (반응형 확장) %>
  <div class="w-full md:max-w-5xl lg:max-w-6xl xl:max-w-[1600px] 2xl:max-w-[1800px]
              h-screen md:h-[70vh] xl:h-[75vh] 2xl:h-[78vh]
              bg-white md:rounded-[2rem] md:shadow-2xl md:shadow-stone-900/5
              md:border md:border-stone-100 overflow-hidden
              flex flex-col md:flex-row">

    <!-- 좌측: 채팅 목록 패널 (모바일: 전체, PC: 360px 고정) -->
    <%= render "chat_rooms/chat_list_panel",
               filter: @filter,
               search: @search,
               total_unread: @total_unread,
               received_unread: @received_unread,
               sent_unread: @sent_unread,
               chat_rooms: @chat_rooms %>

    <!-- 우측: 채팅방 영역 (PC에서만 표시) - Turbo Frame으로 업데이트 -->
    <%= turbo_frame_tag "chat_room_content", class: "hidden md:flex flex-1 flex-col bg-white" do %>
      <!-- 채팅방 미선택 상태 - Fluid Lounge Empty State -->
      <!-- Task 90: Abstract Connection Glassmorphism 아이콘 -->
      <div class="flex-1 flex flex-col items-center justify-center">
        <div class="text-center px-8">
          <!-- 단순한 말풍선 아이콘 -->
          <div class="w-24 h-24 mx-auto mb-6 rounded-2xl bg-gradient-to-br from-orange-50 to-amber-50 flex items-center justify-center">
            <svg class="w-12 h-12 text-orange-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
                    d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
            </svg>
          </div>

          <h2 class="text-xl font-bold text-stone-900 mb-3">대화를 선택해주세요</h2>
          <p class="text-stone-500 max-w-sm leading-relaxed">
            좌측 목록에서 대화를 선택하면<br>
            이곳에서 메시지를 주고받을 수 있습니다
          </p>
        </div>
      </div>
    <% end %>
  </div>
</div>

<!-- 하단 네비게이션 바 (모바일에서만 표시) -->
<%= render "shared/bottom_nav" %>
