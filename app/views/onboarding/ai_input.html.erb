<div class="min-h-screen bg-background flex flex-col">
  <!-- Header -->
  <header class="sticky top-0 bg-background/95 backdrop-blur-sm border-b border-border z-40">
    <div class="max-w-screen-xl mx-auto px-4 py-4 flex items-center gap-3">
<%= render_button variant: :ghost, class: "h-9 w-9 p-0", data: { controller: "navigation", action: "click->navigation#goBack" } do %>
        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
        </svg>
      <% end %>
      <h1 class="text-lg font-semibold text-foreground">아이디어 분석</h1>
    </div>
  </header>

  <!-- Main Content -->
  <main class="flex-1 max-w-screen-xl mx-auto w-full px-4 py-6" data-controller="ai-input">
    <!-- Progress Indicator -->
    <div class="flex items-center justify-center gap-2 mb-8">
      <div class="h-2 w-8 rounded-full bg-primary"></div>
      <div class="h-2 w-8 rounded-full bg-secondary"></div>
      <div class="h-2 w-8 rounded-full bg-secondary"></div>
    </div>

    <!-- Token Display -->
    <div class="flex justify-center mb-6">
      <div class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-secondary/50 border border-border">
        <svg class="h-4 w-4 text-yellow-500" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
        <span class="text-xs font-medium text-muted-foreground">남은 횟수 <span class="text-foreground">3회</span></span>
      </div>
    </div>

    <!-- AI Character -->
    <div class="text-center mb-6">
      <div class="h-20 w-20 mx-auto mb-4 rounded-full bg-gradient-to-br from-primary/20 to-primary/5 flex items-center justify-center">
        <svg class="h-10 w-10 text-primary" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5" d="M9.75 17L9 20l-1 1h8l-1-1-.75-3M3 13h18M5 17h14a2 2 0 002-2V5a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"/>
        </svg>
      </div>
      <h2 class="text-xl font-bold text-foreground mb-2">어떤 아이디어가 있으신가요?</h2>
      <p class="text-sm text-muted-foreground">자유롭게 적어주세요. AI가 분석해드릴게요!</p>
    </div>

    <!-- Input Form -->
    <form action="<%= onboarding_ai_result_path %>" method="get" data-action="submit->ai-input#handleSubmit">
      <div class="bg-card rounded-xl border border-border p-4 mb-6">
        <textarea
          name="idea"
          id="idea-input"
          rows="6"
          placeholder="예: 대학생을 위한 AI 공부 커뮤니티를 만들고 싶어요. 서로 질문하고 답변하면서 학습할 수 있는 플랫폼이요."
          class="w-full bg-transparent text-foreground placeholder:text-muted-foreground resize-none focus:outline-none text-base leading-relaxed"
          data-ai-input-target="textarea"
          data-action="input->ai-input#updateCharCount"
        ></textarea>
        <div class="flex items-center justify-between mt-3 pt-3 border-t border-border">
          <span class="text-xs text-muted-foreground">
            <span data-ai-input-target="charCount">0</span> / 500자
          </span>
          <div class="flex gap-2">
            <button type="button" class="p-2 rounded-lg hover:bg-secondary transition-colors text-muted-foreground">
              <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.172 7l-6.586 6.586a2 2 0 102.828 2.828l6.414-6.586a4 4 0 00-5.656-5.656l-6.415 6.585a6 6 0 108.486 8.486L20.5 13"/>
              </svg>
            </button>
          </div>
        </div>
      </div>

      <!-- Example Ideas -->
      <div class="mb-6">
        <p class="text-xs text-muted-foreground mb-3">예시 아이디어</p>
        <div class="flex flex-wrap gap-2">
          <button type="button" data-action="click->ai-input#fillExample" data-example="대학생들이 서로 스터디 그룹을 만들고 관리할 수 있는 앱" class="px-3 py-1.5 rounded-full bg-secondary/50 text-xs text-muted-foreground hover:bg-secondary hover:text-foreground transition-colors">
            스터디 매칭 앱
          </button>
          <button type="button" data-action="click->ai-input#fillExample" data-example="프리랜서 개발자와 디자이너를 연결해주는 외주 플랫폼" class="px-3 py-1.5 rounded-full bg-secondary/50 text-xs text-muted-foreground hover:bg-secondary hover:text-foreground transition-colors">
            외주 매칭 플랫폼
          </button>
          <button type="button" data-action="click->ai-input#fillExample" data-example="AI가 사용자의 일정을 분석하고 최적의 할 일 순서를 추천해주는 투두 앱" class="px-3 py-1.5 rounded-full bg-secondary/50 text-xs text-muted-foreground hover:bg-secondary hover:text-foreground transition-colors">
            AI 일정 관리
          </button>
        </div>
      </div>

      <!-- Submit Button -->
      <%= render_button class: "w-full h-14 gap-2 shadow-lg", data: { ai_input_target: "submitButton" }, disabled: true do %>
        <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
        </svg>
        AI에게 분석 요청하기
      <% end %>
    </form>
  </main>
</div>
