<%# AI 분석 진행률 표시 Partial - Organic Modern 스타일 (Phase 14) %>
<%# Turbo Stream으로 동적 업데이트됨 %>
<%
  progress_percent = total_stages > 0 ? (current_stage.to_f / total_stages * 100).round : 0
%>

<div class="w-full max-w-xs mx-auto space-y-3"
     data-ai-loading-target="progressContainer"
     data-progress="<%= progress_percent %>">

  <%# 프로그레스 바 %>
  <div class="h-2 bg-stone-200/50 rounded-full overflow-hidden">
    <div class="h-full bg-gradient-to-r from-orange-400 to-amber-500 rounded-full transition-all duration-500 ease-out"
         style="width: <%= progress_percent %>%;"
         data-ai-loading-target="progressBar">
    </div>
  </div>

  <%# 단계 표시 %>
  <div class="flex justify-between text-xs text-stone-400">
    <span><%= current_stage %>/<%= total_stages %></span>
    <span data-ai-loading-target="stageName">
      <% if current_stage == 0 %>
        준비 중...
      <% elsif current_stage <= total_stages %>
        <%= stage_name %>
      <% else %>
        완료!
      <% end %>
    </span>
  </div>
</div>
