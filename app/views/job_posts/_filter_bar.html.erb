<%#
  Enhanced Filter Bar - Sort + Category + Search
  "스마트 필터" 기능

  Structure:
  - Category Chips (Service Types)
  - Sort Dropdown
  - Search Input

  Uses job_filter_controller.js for Stimulus

  Drawbridge Task #104: 고급 필터 버튼 및 패널 삭제 ✅
%>

<section class="mb-8" data-job-filter-target="filterBar">
  <%# === Main Filter Bar === %>
  <div class="flex flex-col lg:flex-row items-stretch lg:items-center gap-3 p-3
              bg-white/90 backdrop-blur-sm rounded-2xl
              border border-stone-300 shadow-sm">

    <%# Category Filter Chips %>
    <div class="flex items-center gap-2 flex-1 overflow-x-auto pb-2 lg:pb-0 hide-scrollbar px-1">
      <button type="button"
              class="filter-chip px-4 py-2 rounded-full text-sm font-semibold whitespace-nowrap
                     bg-stone-900 text-white border border-stone-900 shadow-sm"
              data-job-filter-target="chip"
              data-service-type="all"
              data-action="click->job-filter#filterByType">
        전체
      </button>
      <% Post::SERVICE_TYPES.each do |key, label| %>
        <button type="button"
                class="filter-chip px-4 py-2 rounded-full text-sm font-medium whitespace-nowrap
                       bg-white text-stone-600 border border-stone-200
                       hover:bg-stone-50 hover:border-stone-300 transition-all"
                data-job-filter-target="chip"
                data-service-type="<%= key %>"
                data-action="click->job-filter#filterByType">
          <%= label %>
        </button>
      <% end %>
    </div>

    <%# Sort Dropdown %>
    <div class="flex items-center gap-2 lg:border-l lg:border-stone-200 lg:pl-3">
      <select class="px-4 py-2 text-sm font-medium rounded-xl border border-stone-200
                     bg-white text-stone-700
                     focus:ring-2 focus:ring-orange-200 focus:border-orange-300
                     cursor-pointer transition-all"
              data-job-filter-target="sort"
              data-action="change->job-filter#sortBy">
        <option value="recent">최신순</option>
        <option value="popular">인기순</option>
        <option value="views">조회순</option>
        <option value="price_low">가격 낮은순</option>
        <option value="price_high">가격 높은순</option>
      </select>
    </div>

    <%# Search Input %>
    <div class="flex items-center gap-2 px-4 py-2.5 bg-stone-100 rounded-xl
                border border-transparent
                focus-within:bg-white focus-within:border-orange-300 focus-within:ring-2 focus-within:ring-orange-100
                transition-all">
      <svg class="w-4 h-4 text-stone-400 flex-shrink-0" fill="none" stroke="currentColor" viewBox="0 0 24 24">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"/>
      </svg>
      <input type="text"
             inputmode="search"
             placeholder="검색어 입력..."
             class="bg-transparent text-sm outline-none w-full sm:w-36 focus:w-full transition-all placeholder:text-stone-400"
             data-job-filter-target="search"
             data-action="input->job-filter#filterBySearch">
    </div>

  </div>
</section>
