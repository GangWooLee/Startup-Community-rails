<%# 저장된 글 카드 Partial %>
<%# locals: post, icon (bookmark|heart|comment) %>

<%= link_to post_path(post),
    class: "block p-4 rounded-xl bg-white/60 border border-stone-200/60
            backdrop-blur-sm transition-all duration-200
            hover:shadow-md hover:border-orange-200/60 hover:-translate-y-0.5 group" do %>

  <div class="flex gap-4">
    <%# 썸네일 이미지 (있을 경우) %>
    <% if post.images.attached? %>
      <div class="w-16 h-16 flex-shrink-0 rounded-lg overflow-hidden bg-stone-100">
        <%= image_tag post.images.first.variant(:thumb),
            alt: post.title,
            class: "w-full h-full object-cover" %>
      </div>
    <% end %>

    <%# 콘텐츠 %>
    <div class="flex-1 min-w-0">
      <%# 작성자 + 날짜 %>
      <div class="flex items-center gap-2 mb-1">
        <span class="text-xs text-stone-500"><%= post.user.name %></span>
        <span class="text-xs text-stone-300">·</span>
        <span class="text-xs text-stone-400">
          <%= time_ago_in_words(post.created_at) %> 전
        </span>
      </div>

      <%# 제목 %>
      <h4 class="font-medium text-stone-800 group-hover:text-orange-600
                 transition-colors line-clamp-1 mb-1">
        <%= post.title %>
      </h4>

      <%# 본문 미리보기 %>
      <p class="text-sm text-stone-500 line-clamp-1">
        <%= strip_tags(post.content).truncate(80) %>
      </p>
    </div>

    <%# 아이콘 (타입별 다른 아이콘) %>
    <div class="flex items-center">
      <% case icon %>
      <% when "bookmark" %>
        <svg class="w-5 h-5 text-orange-400" fill="currentColor" viewBox="0 0 24 24">
          <path d="M5 5a2 2 0 012-2h10a2 2 0 012 2v16l-7-3.5L5 21V5z"/>
        </svg>
      <% when "heart" %>
        <svg class="w-5 h-5 text-rose-400" fill="currentColor" viewBox="0 0 24 24">
          <path d="M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"/>
        </svg>
      <% when "comment" %>
        <svg class="w-5 h-5 text-sky-400" fill="currentColor" viewBox="0 0 24 24">
          <path d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
        </svg>
      <% end %>
    </div>
  </div>
<% end %>
