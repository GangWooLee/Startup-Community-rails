<%# 활동 카드 Partial (다형성 렌더링) %>
<%# locals: activity %>

<div class="flex gap-4 p-4 bg-white/80 backdrop-blur-xl border border-white/50
            rounded-2xl shadow-[0_4px_20px_rgb(0,0,0,0.03)]
            hover:shadow-[0_8px_30px_rgb(0,0,0,0.06)] transition-shadow">
  <%# 아이콘 (활동 타입별) %>
  <div class="flex-shrink-0 mt-1">
    <% if activity.is_a?(Post) %>
      <div class="w-9 h-9 bg-orange-50 text-orange-600 rounded-xl
                  flex items-center justify-center">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/>
        </svg>
      </div>
    <% elsif activity.is_a?(Comment) %>
      <div class="w-9 h-9 bg-blue-50 text-blue-600 rounded-xl
                  flex items-center justify-center">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                d="M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"/>
        </svg>
      </div>
    <% end %>
  </div>

  <%# 콘텐츠 %>
  <div class="flex-1 min-w-0">
    <%# 메타 정보 %>
    <p class="text-xs text-stone-400 mb-1.5">
      <%= time_ago_in_words(activity.created_at) %> 전
      <span class="font-medium text-stone-600">
        <%= activity.is_a?(Post) ? "새 글을 작성했습니다" : "댓글을 남겼습니다" %>
      </span>
    </p>

    <%# 게시글인 경우 %>
    <% if activity.is_a?(Post) %>
      <%= link_to post_path(activity),
          class: "group block" do %>
        <h4 class="font-bold text-[#2C2825] group-hover:text-orange-600
                   transition-colors line-clamp-1">
          <%= activity.title %>
        </h4>
        <% if activity.content.present? %>
          <p class="text-sm text-stone-500 mt-1 line-clamp-2">
            <%= strip_tags(activity.content.to_s).truncate(80) %>
          </p>
        <% end %>
      <% end %>

    <%# 댓글인 경우 %>
    <% elsif activity.is_a?(Comment) %>
      <p class="text-stone-600 text-sm line-clamp-2">
        "<%= activity.content.truncate(80) %>"
      </p>
      <% if activity.post.present? %>
        <%= link_to post_path(activity.post),
            class: "inline-flex items-center gap-1 text-xs text-stone-400
                    hover:text-stone-600 mt-2 transition-colors" do %>
          <span>원문 보기</span>
          <svg class="w-3 h-3" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M9 5l7 7-7 7"/>
          </svg>
        <% end %>
      <% end %>
    <% end %>
  </div>
</div>
