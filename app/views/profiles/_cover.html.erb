<%# 커버 이미지 영역 - Organic Hero Style %>
<%# locals: user, editable (optional - default false) %>

<% editable ||= false %>

<div class="relative h-52 sm:h-56 lg:h-64 rounded-2xl overflow-hidden mb-6 group">
  <% if user.has_cover_image? %>
    <%# 업로드된 커버 이미지 %>
    <%= image_tag user.cover_image,
        alt: "#{user.name}님의 커버 이미지",
        class: "w-full h-full object-cover" %>
  <% else %>
    <%# Organic Gradient Pattern %>
    <div class="w-full h-full bg-gradient-to-br <%= user.cover_gradient %> relative overflow-hidden">
      <%# 추상적 도형 패턴 - 깊이감 생성 %>
      <div class="absolute -top-20 -right-20 w-60 h-60 bg-white/20 rounded-full blur-3xl"></div>
      <div class="absolute -bottom-16 -left-16 w-48 h-48 bg-orange-200/30 rounded-full blur-2xl"></div>
      <div class="absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 w-72 h-72 bg-white/10 rounded-full blur-3xl"></div>

      <%# 기하학적 악센트 %>
      <div class="absolute top-8 right-12 w-16 h-16 border-2 border-white/20 rounded-2xl rotate-12"></div>
      <div class="absolute bottom-12 left-8 w-12 h-12 bg-white/10 rounded-xl -rotate-6"></div>
    </div>
  <% end %>

  <%# 노이즈 텍스처 오버레이 %>
  <div class="absolute inset-0 opacity-20 pointer-events-none"
       style="background-image: url('data:image/svg+xml,%3Csvg viewBox=\"0 0 200 200\" xmlns=\"http://www.w3.org/2000/svg\"%3E%3Cfilter id=\"noise\"%3E%3CfeTurbulence type=\"fractalNoise\" baseFrequency=\"0.65\" numOctaves=\"3\" stitchTiles=\"stitch\"/%3E%3C/filter%3E%3Crect width=\"100%\" height=\"100%\" filter=\"url(%23noise)\" opacity=\"0.4\"/%3E%3C/svg%3E');">
  </div>

  <% if editable %>
    <%# 편집 가능 상태 - 업로드 버튼 표시 %>
    <div class="absolute inset-0 flex items-center justify-center
                bg-black/0 group-hover:bg-black/30 transition-all duration-300">
      <label class="cursor-pointer opacity-0 group-hover:opacity-100 transition-all duration-300
                    transform group-hover:scale-100 scale-95">
        <div class="flex items-center gap-2 px-5 py-3 bg-white/95 backdrop-blur-sm
                    rounded-xl shadow-xl text-sm font-bold text-[#2C2825]
                    hover:bg-white hover:scale-105 transition-all duration-200">
          <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"/>
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"
                  d="M15 13a3 3 0 11-6 0 3 3 0 016 0z"/>
          </svg>
          <span>커버 이미지 변경</span>
        </div>
        <%= file_field_tag :cover_image,
            accept: "image/jpeg,image/png,image/gif,image/webp",
            class: "hidden",
            data: {
              action: "change->cover-upload#preview",
              cover_upload_target: "input"
            } %>
      </label>
    </div>
  <% end %>

  <%# 하단 그라디언트 페이드 %>
  <div class="absolute bottom-0 left-0 right-0 h-20 bg-gradient-to-t from-[#FDFBF7] to-transparent"></div>
</div>
