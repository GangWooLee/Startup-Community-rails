<div class="min-h-screen bg-background pb-20">
  <!-- Header -->
  <header class="sticky top-0 bg-background/95 backdrop-blur-sm border-b border-border z-40">
    <div class="max-w-screen-xl mx-auto px-4 py-3">
      <div class="flex items-center gap-3">
        <!-- 뒤로가기 버튼 -->
        <%= render_button variant: :ghost, class: "h-9 w-9 p-0", data: { controller: "navigation", action: "click->navigation#goBack" } do %>
          <svg class="h-5 w-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
          </svg>
        <% end %>
        <div>
          <h1 class="text-xl font-bold">AI 분석 기록</h1>
          <p class="text-xs text-muted-foreground">내 아이디어 분석 히스토리</p>
        </div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="max-w-screen-xl mx-auto px-4 py-6">
    <% if @usage_logs.any? %>
      <div class="space-y-3">
        <% @usage_logs.each do |log| %>
          <% analysis = log.idea_analysis %>
          <% has_analysis = analysis.present? %>

          <% if has_analysis %>
            <%# 분석 결과가 있는 경우 - 클릭 가능 %>
            <%= link_to ai_result_path(analysis) do %>
              <%= render partial: "my_page/usage_log_card", locals: { log: log, analysis: analysis, expired: false } %>
            <% end %>
          <% else %>
            <%# 분석 결과가 삭제된 경우 - 클릭 불가 %>
            <%= render partial: "my_page/usage_log_card", locals: { log: log, analysis: nil, expired: true } %>
          <% end %>
        <% end %>
      </div>
    <% else %>
      <div class="text-center py-12">
        <div class="inline-flex h-16 w-16 items-center justify-center rounded-full bg-secondary mb-4">
          <svg class="h-8 w-8 text-muted-foreground" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9.663 17h4.673M12 3v1m6.364 1.636l-.707.707M21 12h-1M4 12H3m3.343-5.657l-.707-.707m2.828 9.9a5 5 0 117.072 0l-.548.547A3.374 3.374 0 0014 18.469V19a2 2 0 11-4 0v-.531c0-.895-.356-1.754-.988-2.386l-.548-.547z"/>
          </svg>
        </div>
        <h3 class="text-lg font-semibold mb-2">아직 분석 기록이 없어요</h3>
        <p class="text-sm text-muted-foreground mb-4">AI에게 아이디어를 분석받아 보세요!</p>
        <%= render_button as: :link, href: onboarding_ai_input_path, class: "gap-2" do %>
          <svg class="h-4 w-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
          </svg>
          AI 분석 시작하기
        <% end %>
      </div>
    <% end %>
  </main>
</div>
