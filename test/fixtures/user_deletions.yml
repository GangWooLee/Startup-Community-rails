# frozen_string_literal: true
# 회원 탈퇴 기록 fixture
# Rails Active Record Encryption: 평문으로 작성해도 자동 암호화/복호화 처리

# 최근 탈퇴 (서비스 미사용)
recent_deletion:
  user: two
  status: completed
  reason_category: not_using
  reason_detail: 서비스를 더 이상 사용하지 않아서 탈퇴합니다.
  email_original: user2@test.com
  name_original: User Two
  phone_original: "01012345678"
  email_hash: <%= Digest::SHA256.hexdigest("user2@test.com") %>
  snapshot_data: '{"posts_count": 5, "comments_count": 10}'
  activity_stats: {"posts": 5, "comments": 10, "likes": 20}
  user_snapshot: {"email": "user2@test.com", "name": "User Two", "created_at": "<%= 2.months.ago.iso8601 %>"}
  requested_at: <%= 3.days.ago %>
  destroy_scheduled_at: <%= 5.years.from_now - 3.days %>
  admin_view_count: 0
  created_at: <%= 3.days.ago %>
  updated_at: <%= 3.days.ago %>

# 오래된 탈퇴 (개인정보 우려, 관리자 열람 이력 있음)
viewed_deletion:
  user: three
  status: completed
  reason_category: privacy_concern
  reason_detail: 개인정보 보호가 걱정되어 탈퇴합니다.
  email_original: user3@test.com
  name_original: User Three
  phone_original: "01098765432"
  email_hash: <%= Digest::SHA256.hexdigest("user3@test.com") %>
  snapshot_data: '{"posts_count": 3, "comments_count": 8}'
  activity_stats: {"posts": 3, "comments": 8, "likes": 15}
  user_snapshot: {"email": "user3@test.com", "name": "User Three", "created_at": "<%= 3.months.ago.iso8601 %>"}
  requested_at: <%= 1.month.ago %>
  destroy_scheduled_at: <%= 5.years.from_now - 1.month %>
  admin_view_count: 2
  last_viewed_at: <%= 1.week.ago %>
  last_viewed_by: <%= ActiveRecord::FixtureSet.identify(:admin) %>
  created_at: <%= 1.month.ago %>
  updated_at: <%= 1.week.ago %>

# 곧 만료될 탈퇴 기록 (30일 이내)
expiring_soon_deletion:
  user: one
  status: completed
  reason_category: found_alternative
  reason_detail: 다른 서비스로 이전합니다.
  email_original: expiring@test.com
  name_original: Expiring User
  phone_original:
  email_hash: <%= Digest::SHA256.hexdigest("expiring@test.com") %>
  snapshot_data: '{"posts_count": 1}'
  activity_stats: {"posts": 1}
  user_snapshot: {"email": "expiring@test.com", "name": "Expiring User"}
  requested_at: <%= 5.years.ago + 15.days %>
  destroy_scheduled_at: <%= 15.days.from_now %>
  admin_view_count: 0
  created_at: <%= 5.years.ago + 15.days %>
  updated_at: <%= 5.years.ago + 15.days %>

# 이미 만료된 탈퇴 기록 (자동 파기 대상)
expired_deletion:
  user: one
  status: completed
  reason_category: other
  reason_detail: 기타 사유
  email_original: expired@test.com
  name_original: Expired User
  phone_original:
  email_hash: <%= Digest::SHA256.hexdigest("expired@test.com") %>
  snapshot_data: '{}'
  activity_stats: {}
  user_snapshot: {"email": "expired@test.com", "name": "Expired User"}
  requested_at: <%= 6.years.ago %>
  destroy_scheduled_at: <%= 1.year.ago %>
  admin_view_count: 1
  created_at: <%= 6.years.ago %>
  updated_at: <%= 1.year.ago %>
